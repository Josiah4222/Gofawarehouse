<div class="container">
  <h2>ወጪ መቀነስ</h2>
  <p>እቃ: {{ item?.name }}</p>
  <p>የአሁኑ ብዛት: {{ item?.quantity }}</p>

  <form [formGroup]="withdrawForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="withdrawnQuantity">የሚወጣው ብዛት:</label>
      <input
        id="withdrawnQuantity"
        type="number"
        class="form-control"
        formControlName="withdrawnQuantity"
        [class.is-invalid]="withdrawForm.get('withdrawnQuantity')?.invalid && withdrawForm.get('withdrawnQuantity')?.touched"
      />
      <div class="invalid-feedback" *ngIf="withdrawForm.get('withdrawnQuantity')?.hasError('required')">
        ብዛት ያስፈልጋል።
      </div>
      <div class="invalid-feedback" *ngIf="withdrawForm.get('withdrawnQuantity')?.hasError('min')">
        ብዛት ቢያንስ 1 መሆን አለበት።
      </div>
    </div>

    <div class="form-group">
      <label for="recipient">ተቀባይ:</label>
      <input
        id="recipient"
        type="text"
        class="form-control"
        formControlName="recipient"
        [class.is-invalid]="withdrawForm.get('recipient')?.invalid && withdrawForm.get('recipient')?.touched"
      />
      <div class="invalid-feedback" *ngIf="withdrawForm.get('recipient')?.hasError('required')">
        ተቀባይ ያስፈልጋል።
      </div>
    </div>

    <div class="form-group">
      <label for="boxCount">የቦክስ ብዛት:</label>
      <input
        id="boxCount"
        type="number"
        class="form-control"
        formControlName="boxCount"
        [class.is-invalid]="withdrawForm.get('boxCount')?.invalid && withdrawForm.get('boxCount')?.touched"
      />
      <div class="invalid-feedback" *ngIf="withdrawForm.get('boxCount')?.hasError('required')">
        የቦክስ ብዛት ያስፈልጋል።
      </div>
      <div class="invalid-feedback" *ngIf="withdrawForm.get('boxCount')?.hasError('min')">
        የቦክስ ብዛት ከ0 በታች መሆን አይችልም።
      </div>
    </div>

    <div class="form-group">
      <label for="withdrawalDate">የወጣበት ቀን:</label>
      <input
        id="withdrawalDate"
        type="date"
        class="form-control"
        formControlName="withdrawalDate"
        [class.is-invalid]="withdrawForm.get('withdrawalDate')?.invalid && withdrawForm.get('withdrawalDate')?.touched"
      />
      <div class="invalid-feedback" *ngIf="withdrawForm.get('withdrawalDate')?.hasError('required')">
        ቀን ያስፈልጋል።
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="withdrawForm.invalid || isSubmitting">
      {{ isSubmitting ? 'በመቀነስ ላይ...' : 'ቀንስ' }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="isSubmitting">
      መሰረት
    </button>
  </form>
</div>